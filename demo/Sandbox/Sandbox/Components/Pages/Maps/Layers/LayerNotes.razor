@page "/map-layer-notes"
@rendermode InteractiveServer

<PageTitle>Layer Notes</PageTitle>

<FluentLayout>
	<PageHeader Header="Layer Notes"
				HRefCode="@hRefCode"
				Subject="Basic Layers">
		<FluentLabel Typo="Typography.Subject">
			The layer pages in this group rely heavily on a custom UI.
			The UI is not required to add a layer to the map.
			<br />
			Here are a some examples of adding a layer to a map without the UI.
			<br />
			The examples use a 'Data Service' to simulate querying the layer data from an API.
		</FluentLabel>
	</PageHeader>

	<FluentTabs OnTabChange="OnTabChange">
		<FluentTab Id="@GetTabId(MapLayerType.Bubble)" Label="@GetTabLabel(MapLayerType.Bubble)">
			@if (activeTabId == GetTabId(MapLayerType.Bubble))
			{
				<MarkDownView Url="@GetMapLayerExampleUrl(MapLayerType.Bubble)" />
			}
		</FluentTab>
		<FluentTab Id="@GetTabId(MapLayerType.HeatMap)" Label="@GetTabLabel(MapLayerType.HeatMap)">
			@if (activeTabId == GetTabId(MapLayerType.HeatMap))
			{
				<MarkDownView Url="@GetMapLayerExampleUrl(MapLayerType.HeatMap)" />
			}
		</FluentTab>
		<FluentTab Id="@GetTabId(MapLayerType.Image)" Label="@GetTabLabel(MapLayerType.Image)">
			@if (activeTabId == GetTabId(MapLayerType.Image))
			{
				<MarkDownView Url="@GetMapLayerExampleUrl(MapLayerType.Image)" />
			}
		</FluentTab>
		<FluentTab Id="@GetTabId(MapLayerType.Line)" Label="@GetTabLabel(MapLayerType.Line)">
			@if (activeTabId == GetTabId(MapLayerType.Line))
			{
				<MarkDownView Url="@GetMapLayerExampleUrl(MapLayerType.Line)" />
			}
		</FluentTab>
		<FluentTab Id="@GetTabId(MapLayerType.Polygon)" Label="@GetTabLabel(MapLayerType.Polygon)">
			@if (activeTabId == GetTabId(MapLayerType.Polygon))
			{
				<MarkDownView Url="@GetMapLayerExampleUrl(MapLayerType.Polygon)" />
			}
		</FluentTab>
		<FluentTab Id="@GetTabId(MapLayerType.PolygonExtrusion)" Label="@GetTabLabel(MapLayerType.PolygonExtrusion)">
			@if (activeTabId == GetTabId(MapLayerType.PolygonExtrusion))
			{
				<MarkDownView Url="@GetMapLayerExampleUrl(MapLayerType.PolygonExtrusion)" />
			}
		</FluentTab>
		<FluentTab Id="@GetTabId(MapLayerType.Symbol)" Label="@GetTabLabel(MapLayerType.Symbol)">
			@if (activeTabId == GetTabId(MapLayerType.Symbol))
			{
				<MarkDownView Url="@GetMapLayerExampleUrl(MapLayerType.Symbol)" />
			}
		</FluentTab>
		<FluentTab Id="@GetTabId(MapLayerType.Tile)" Label="@GetTabLabel(MapLayerType.Tile)">
			@if (activeTabId == GetTabId(MapLayerType.Tile))
			{
				<MarkDownView Url="@GetMapLayerExampleUrl(MapLayerType.Tile)" />
			}
		</FluentTab>
	</FluentTabs>

</FluentLayout>

@code {
	private const string height = "400px";
	private const string width = "100%";
	private readonly string hRefCode = HRefCodeSource.Sandbox.CodeUrl("MapExtensions.cs");
	private string activeTabId = GetTabId(MapLayerType.Bubble);

	private static string GetTabId(MapLayerType layerType)
	{
		return layerType.ToString().ToLower() + "-layer-tab";
	}

	private static string GetTabLabel(MapLayerType layerType)
	{
		return layerType.ToString() + " Layer";
	}

	private static string GetMapLayerExampleUrl(MapLayerType layerType)
	{
		return HRefCodeSource.Examples.CodeUrl($"add{layerType}Layer.md");
	}

	private void OnTabChange(FluentTab tab)
	{
		activeTabId = tab.Id!;
		Console.WriteLine($"Switched to tab: {tab.Id}. ActiveTabId:{activeTabId}");
	}
}
