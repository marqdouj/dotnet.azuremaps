var marqdoujAzureMaps;(()=>{"use strict";var e={d:(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Configuration:()=>w,Layers:()=>A,MapFactory:()=>N,Maps:()=>T});const a=atlas;var o,r,s,n,d,i,l,c,p,u,v,g,y,M,h,E,m,f,L,I;!function(e){let t;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(t=e.LogLevel||(e.LogLevel={})),e.currentLevel=t.Information,e.logMessage=function(a,o,r,...s){if(o<e.currentLevel)return;const n=`${function(e){return`Map with Id '${e}'`}(a)} ${r}`;switch(o){case t.Trace:console.trace(n,...s);break;case t.Debug:console.debug(n,...s);break;case t.Information:console.info(n,...s);break;case t.Warn:console.warn(n,...s);break;case t.Error:console.error(n,...s);break;case t.Critical:console.error(`CRITICAL: ${n}`,...s)}}}(o||(o={})),function(e){e.Point="point",e.MultiPoint="multipoint",e.LineString="linestring",e.MultiLineString="multilinestring",e.Polygon="polygon",e.MultiPolygon="multipolygon"}(r||(r={}));class b{static isEmptyOrNull(e){return""===e?.trim()}static isNotEmptyOrNull(e){return!this.isEmptyOrNull(e)}static isValueInEnum(e,t){return Object.values(e).includes(t)}static isFeature(e){return e&&"Feature"===e.type}static isShape(e){return e&&null!=e.getType}static getFeatureResult(e){return{id:e.id?.toString(),type:e.geometry.type,bbox:e.bbox,source:"feature",properties:e.properties}}static getShapeResult(e){return{id:e.getId()?.toString(),type:e.getType(),bbox:e.getBounds(),source:"shape",properties:e.getProperties()}}static buildShapeResults(e){const t=[];return e.filter(e=>this.isFeature(e)).forEach(e=>{t.push(this.getFeatureResult(e))}),e.filter(e=>this.isShape(e)).forEach(e=>{t.push(this.getShapeResult(e))}),t}}class S{static addControls(e,t){const r=N.getMap(e);r&&t.forEach(t=>{let s=null;switch(t.type.toLowerCase()){case"compass":s=new a.control.CompassControl(t.options);break;case"fullscreen":s=new a.control.FullscreenControl(t.options);break;case"pitch":s=new a.control.PitchControl(t.options);break;case"scale":s=new a.control.ScaleControl(t.options);break;case"style":s=new a.control.StyleControl(t.options);break;case"zoom":s=new a.control.ZoomControl(t.options);break;default:o.logMessage(e,o.LogLevel.Warn,`- addControls: control type '${t.type}' is not supported.`)}if(s){const e={id:t.id,interopId:t.interopId,type:t.type,options:t.options,controlOptions:t.controlOptions};s.jsInterop=e,r.controls.add(s,t.controlOptions)}})}static getControlByByInteropId(e,t){const a=N.getMap(e);if(!a)return;let r;var s=a.controls.getControls().filter(e=>this.#e(e,t));return 1==s.length?r=s[0]:s.length>1?o.logMessage(e,o.LogLevel.Error,`getControlByByInteropId: more than one control was found where interopId = '${t}'.`):o.logMessage(e,o.LogLevel.Debug,`getControlByByInteropId: control not found where interopId = '${t}'`),r}static getControls(e){const t=N.getMap(e);if(!t)return;const a=t.controls.getControls(),o=[];return a.filter(e=>this.#t(e)).forEach(e=>{const t=e.jsInterop;t&&o.push(t)}),o}static removeControls(e,t){const a=N.getMap(e);a&&a.controls.getControls().filter(e=>this.#t(e)).forEach(r=>{const s=r.jsInterop;o.logMessage(e,o.LogLevel.Trace,"found control:",s);const n=t.findLast(e=>e.id==s.id&&e.interopId==s.interopId);n&&(a.controls.remove(r),o.logMessage(e,o.LogLevel.Trace,"removing control:",n))})}static#t(e){return e&&null!=e.jsInterop&&null!=e.jsInterop.interopId}static#e(e,t){return this.#t(e)&&e.jsInterop.interopId===t}}class k{static add(e,t){const o=N.getMap(e);o&&t.forEach(e=>{let t={...e.options};t.popup&&(t.popup=new a.Popup(t.popup.options));let r=new a.HtmlMarker(t);const s={id:e.id,interopId:e.interopId};r.jsInterop=s,o.markers.add(r),e.togglePopupOnClick&&o.events.add("click",r,()=>{r.togglePopup()})})}static remove(e,t){const a=N.getMap(e);a&&t.forEach(t=>{let o=this.#a(a,e,t.interopId);o&&a.markers.remove(o)})}static getMarker(e,t){const a=N.getMap(e);if(a)return this.#a(a,e,t)}static#a(e,t,a){const r=e.markers.getMarkers().findLast(e=>this.#o(e,a));return r||o.logMessage(t,o.LogLevel.Debug,`getMarker: marker not found where id = '${a}'`),r}static#o(e,t){let o=e instanceof a.HtmlMarker&&null!=e.jsInterop.interopId;return o&&b.isNotEmptyOrNull(t)&&(o=e.jsInterop.id===t||e.jsInterop.interopId===t),o}}class D{static add(e,t){const o=N.getMap(e);o&&t.forEach(e=>{let t=new a.Popup(e.options);const r={id:e.id,interopId:e.interopId};t.jsInterop=r,o.popups.add(t)})}static remove(e,t){const a=N.getMap(e);a&&t.forEach(t=>{let o=this.#r(a,e,t.interopId);o&&a.popups.remove(o)})}static getPopup(e,t){const a=N.getMap(e);if(a)return this.#r(a,e,t)}static#r(e,t,a){const r=e.popups.getPopups().findLast(e=>this.#s(e,a));return r||o.logMessage(t,o.LogLevel.Debug,`getPopup: popup not found where id = '${a}'`),r}static#s(e,t){let o=e instanceof a.Popup&&null!=e.jsInterop.interopId;return o&&b.isNotEmptyOrNull(t)&&(o=e.jsInterop.id===t||e.jsInterop.interopId===t),o}}class C{static addEvents(e,t,a){if(0==a.length)return;const r=N.getMap(t);r?(a??=[],o.logMessage(t,o.LogLevel.Trace,"addEvents",a,Object.values(a).filter(e=>"map"===e.target)),this.#n(e,r,t,Object.values(a).filter(e=>"map"===e.target)),this.#d(e,r,t,Object.values(a).filter(e=>"datasource"===e.target)),this.#i(e,r,t,Object.values(a).filter(e=>"htmlmarker"===e.target)),this.#l(e,r,t,Object.values(a).filter(e=>"layer"===e.target)),this.#c(e,r,t,Object.values(a).filter(e=>"shape"===e.target)),this.#p(e,r,t,Object.values(a).filter(e=>"stylecontrol"===e.target)),this.#u(e,r,t,Object.values(a).filter(e=>"popup"===e.target))):o.logMessage(t,o.LogLevel.Error,"EventManager:addEvents - map not found.")}static removeEvents(e,t){if(0==t.length)return;const a=N.getMap(e);a?(t??=[],this.#v(a,e,Object.values(t).filter(e=>"map"===e.target)),this.#g(a,e,Object.values(t).filter(e=>"datasource"===e.target)),this.#y(a,e,Object.values(t).filter(e=>"htmlmarker"===e.target)),this.#M(a,e,Object.values(t).filter(e=>"layer"===e.target)),this.#h(a,e,Object.values(t).filter(e=>"shape"===e.target)),this.#E(a,e,Object.values(t).filter(e=>"stylecontrol"===e.target)),this.#m(a,e,Object.values(t).filter(e=>"popup"===e.target))):o.logMessage(e,o.LogLevel.Error,"EventManager:removeEvents - map not found.")}static#n(e,t,a,o){0!=o.length&&(this.#f(e,t,a,o),this.#L(e,t,a,o),this.#I(e,t,a,o),this.#b(e,t,a,o),this.#S(e,t,a,o),this.#k(e,t,a,o),this.#D(e,t,a,o),this.#C(e,t,a,o),this.#O(e,t,a,o))}static#f(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(i,e.type)).forEach(r=>{r.once?o.logMessage(a,o.LogLevel.Error,"event not added. 'once' is not supported:",r):t.events.add(r.type,t=>{const o={mapId:a,type:r.type,payload:t};e.invokeMethodAsync(s.NotifyMapEventConfig,o)}),o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#L(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(l,e.type)).forEach(r=>{let n={mapId:a,type:r.type};r.once?t.events.addOnce(r.type,t=>{n.payload={dataType:t.dataType,isSourceLoaded:t.isSourceLoaded,source:t.source?.getId(),sourceDataType:t.sourceDataType,tile:t.tile},e.invokeMethodAsync(s.NotifyMapEventData,n)}):t.events.add(r.type,t=>{n.payload={dataType:t.dataType,isSourceLoaded:t.isSourceLoaded,source:t.source?.getId(),sourceDataType:t.sourceDataType,tile:t.tile},e.invokeMethodAsync(s.NotifyMapEventData,n)}),o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#I(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(d,e.type)).forEach(r=>{let n={mapId:a,type:r.type};r.once?t.events.addOnce(r.type,()=>{e.invokeMethodAsync(s.NotifyMapEvent,n)}):t.events.add(r.type,()=>{e.invokeMethodAsync(s.NotifyMapEvent,n)}),o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#b(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(p,e.type)).forEach(r=>{let n={mapId:a,type:r.type};r.once?t.events.addOnce(r.type,t=>{n.payload={id:t.getId()},e.invokeMethodAsync(s.NotifyMapEvent,n)}):t.events.add(r.type,t=>{n.payload={id:t.getId()},e.invokeMethodAsync(s.NotifyMapEvent,n)}),o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#S(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(u,e.type)).forEach(r=>{let n={mapId:a,type:r.type};r.once?t.events.addOnce(r.type,t=>{n.payload=this.#T(t),e.invokeMethodAsync(s.NotifyMapEventMouse,n)}):t.events.add(r.type,t=>{n.payload=this.#T(t),e.invokeMethodAsync(s.NotifyMapEventMouse,n)}),o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#k(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(g,e.type)).forEach(r=>{let n={mapId:a,type:r.type};r.once?t.events.addOnce(r.type,t=>{n.payload={id:t.getId()},e.invokeMethodAsync(s.NotifyMapEventSource,n)}):t.events.add(r.type,t=>{n.payload={id:t.getId()},e.invokeMethodAsync(s.NotifyMapEventSource,n)}),o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#D(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(y,e.type)).forEach(r=>{let n={mapId:a,type:r.type};switch(r.type.toLowerCase()){case y.StyleChanged:r.once,t.events.addOnce(y.StyleChanged,t=>{n.payload={style:t.style},e.invokeMethodAsync(s.NotifyMapEventStyle,n)});break;case y.StyleImageMissing:r.once,t.events.addOnce(y.StyleImageMissing,t=>{n.payload={style:t},e.invokeMethodAsync(s.NotifyMapEventStyle,n)})}o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#C(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(M,e.type)).forEach(r=>{let n={mapId:a,type:r.type};r.once?t.events.addOnce(r.type,t=>{n.payload=this.#N(t),e.invokeMethodAsync(s.NotifyMapEventTouch,n)}):t.events.add(r.type,t=>{n.payload=this.#N(t),e.invokeMethodAsync(s.NotifyMapEventTouch,n)}),o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#O(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(v,e.type)).forEach(r=>{let n={mapId:a,type:r.type};r.once?t.events.addOnce(r.type,t=>{n.payload=this.#w(t),e.invokeMethodAsync(s.NotifyMapEventWheel,n)}):t.events.add(r.type,t=>{n.payload=this.#w(t),e.invokeMethodAsync(s.NotifyMapEventWheel,n)}),o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#v(e,t,a){0!=a.length&&a.forEach(a=>{e.events.remove(a.type,()=>{}),o.logMessage(t,o.LogLevel.Trace,"event removed:",a)})}static#d(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(c,e.type)).forEach(r=>{const n=t.sources.getById(r.targetId);if(n){let d,i=[];d.sourceId=r.targetId,d.shapes=i;let l={mapId:a,type:r.type,payload:d},p=!0;switch(r.type.toLowerCase()){case c.DataSourceUpdated:r.once?t.events.addOnce(c.DataSourceUpdated,n,()=>{e.invokeMethodAsync(s.NotifyMapEventDataSource,l)}):t.events.add(c.DataSourceUpdated,n,()=>{e.invokeMethodAsync(s.NotifyMapEventDataSource,l)});break;case c.DataAdded:case c.DataRemoved:r.once?t.events.addOnce(r.type,n,t=>{d.shapes=this.#P(t),e.invokeMethodAsync(s.NotifyMapEventDataSource,l)}):t.events.add(r.type,n,t=>{d.shapes=this.#P(t),e.invokeMethodAsync(s.NotifyMapEventDataSource,l)});break;default:p=!1}p?o.logMessage(a,o.LogLevel.Trace,"event added:",r):o.logMessage(a,o.LogLevel.Trace,"event was not added - type not found:",r)}else o.logMessage(a,o.LogLevel.Error,"EventManager:addDataSourceEvents - invalid TargetId.",r)})}static#g(e,t,a){a.forEach(a=>{const r=e.sources.getById(a.targetId);r?(e.events.remove(a.type,r,()=>{}),o.logMessage(t,o.LogLevel.Trace,"event removed:",a)):o.logMessage(t,o.LogLevel.Error,"EventManager:removeDataSourceEvents - invalid TargetId.",a)})}static#i(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(h,e.type)).forEach(r=>{const n=k.getMarker(a,r.targetId);if(n){let d={mapId:a,type:r.type};r.once?t.events.addOnce(r.type,n,t=>{d.payload=this.#A(t),e.invokeMethodAsync(s.NotifyMapEventHtmlMarker,d)}):t.events.add(r.type,n,t=>{d.payload=this.#A(t),e.invokeMethodAsync(s.NotifyMapEventHtmlMarker,d)}),o.logMessage(a,o.LogLevel.Trace,"event added:",r)}else o.logMessage(a,o.LogLevel.Error,"EventManager:addHtmlMarkerEvents - invalid TargetId.",r);o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#y(e,t,a){0!=a.length&&a.forEach(a=>{const r=k.getMarker(t,a.targetId);r?(e.events.remove(a.type,r,()=>{}),o.logMessage(t,o.LogLevel.Trace,"event removed:",a)):o.logMessage(t,o.LogLevel.Error,"EventManager:removeHtmlMarkerEvents - invalid TargetId.",a)})}static#l(e,t,a,r){0!=r.length&&(o.logMessage(a,o.LogLevel.Trace,"addLayerEvents:",r),Object.values(r).filter(e=>b.isValueInEnum(E,e.type)).forEach(r=>{const n=t.layers.getLayerById(r.targetId);if(n){let d={mapId:a,type:r.type},i=!1;b.isValueInEnum(M,r.type)&&(r.once?t.events.addOnce(r.type,n,t=>{d.payload={id:r.targetId,touch:this.#N(t)},e.invokeMethodAsync(s.NotifyMapEventLayer,d)}):t.events.add(r.type,n,t=>{d.payload={id:r.targetId,touch:this.#N(t)},e.invokeMethodAsync(s.NotifyMapEventLayer,d)}),i=!0),b.isValueInEnum(p,r.type)&&(r.once?t.events.addOnce(r.type,n,t=>{d.payload={id:t.getId()},e.invokeMethodAsync(s.NotifyMapEventLayer,d)}):t.events.add(r.type,n,t=>{d.payload={id:t.getId()},e.invokeMethodAsync(s.NotifyMapEventLayer,d)}),i=!0),(b.isValueInEnum(u,r.type)||b.isValueInEnum(m,r.type))&&(r.once?t.events.addOnce(r.type,n,t=>{d.payload={id:r.targetId,mouse:this.#T(t)},e.invokeMethodAsync(s.NotifyMapEventLayer,d)}):t.events.add(r.type,n,t=>{d.payload={id:r.targetId,mouse:this.#T(t)},e.invokeMethodAsync(s.NotifyMapEventLayer,d)}),i=!0),b.isValueInEnum(v,r.type)&&(r.once?t.events.addOnce(r.type,n,t=>{d.payload={id:r.targetId,wheel:this.#w(t)},e.invokeMethodAsync(s.NotifyMapEventLayer,d)}):t.events.add(r.type,n,t=>{d.payload={id:r.targetId,wheel:this.#w(t)},e.invokeMethodAsync(s.NotifyMapEventLayer,d)}),i=!0),i?o.logMessage(a,o.LogLevel.Trace,"event added:",r):o.logMessage(a,o.LogLevel.Error,"event not added - type not implemented:",r)}else o.logMessage(a,o.LogLevel.Error,"EventManager:addLayerEvents - invalid TargetId.",r)}))}static#M(e,t,a){0!=a.length&&a.forEach(a=>{const r=e.layers.getLayerById(a.targetId);r?(e.events.remove(a.type,r,()=>{}),o.logMessage(t,o.LogLevel.Trace,"event removed:",a)):o.logMessage(t,o.LogLevel.Error,"EventManager:removeLayerEvents - invalid TargetId.",a)})}static#c(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(L,e.type)).forEach(r=>{const n=t.sources.getById(r.targetSourceId).getShapeById(r.targetId);if(n){let d={mapId:a,type:r.type};r.once?t.events.addOnce(r.type,n,t=>{d.payload={id:t.getId()},e.invokeMethodAsync(s.NotifyMapEventShape,d)}):t.events.add(r.type,n,t=>{d.payload={id:t.getId()},e.invokeMethodAsync(s.NotifyMapEventShape,d)}),o.logMessage(a,o.LogLevel.Trace,"event added:",r)}else o.logMessage(a,o.LogLevel.Error,"EventManager:addShapeEvents - invalid TargetId or TargetSourceId.",r);o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#h(e,t,a){a.forEach(a=>{const r=e.sources.getById(a.targetSourceId).getShapeById(a.targetId);r?(e.events.remove(a.type,r,()=>{}),o.logMessage(t,o.LogLevel.Trace,"event removed:",a)):o.logMessage(t,o.LogLevel.Error,"EventManager:removeShapeEvents - invalid TargetId or TargetSourceId.",a)})}static#p(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(I,e.type)).forEach(r=>{const n=S.getControlByByInteropId(a,r.targetId);if(n){let d={mapId:a,type:r.type};r.once?t.events.addOnce(r.type,n,t=>{d.payload={style:t},e.invokeMethodAsync(s.NotifyMapEventStyle,d)}):t.events.add(r.type,n,t=>{d.payload={style:t},e.invokeMethodAsync(s.NotifyMapEventStyle,d)}),o.logMessage(a,o.LogLevel.Trace,"event added:",r)}else o.logMessage(a,o.LogLevel.Error,"EventManager:addShapeEvents - invalid TargetId.",r);o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#E(e,t,a){a.forEach(a=>{const r=S.getControlByByInteropId(t,a.targetId);r?(e.events.remove(a.type,r,()=>{}),o.logMessage(t,o.LogLevel.Trace,"event removed:",a)):o.logMessage(t,o.LogLevel.Error,"EventManager:removeStyleControlEvents - invalid TargetId.",a)})}static#u(e,t,a,r){0!=r.length&&Object.values(r).filter(e=>b.isValueInEnum(f,e.type)).forEach(r=>{const n=D.getPopup(a,r.targetId);if(n){let d={mapId:a,type:r.type};r.once?t.events.addOnce(r.type,n,t=>{d.payload=this.#A(t),e.invokeMethodAsync(s.NotifyMapEventPopup,d)}):t.events.add(r.type,n,t=>{d.payload=this.#A(t),e.invokeMethodAsync(s.NotifyMapEventPopup,d)}),o.logMessage(a,o.LogLevel.Trace,"event added:",r)}else o.logMessage(a,o.LogLevel.Error,"EventManager:addPopupEvents - invalid TargetId.",r);o.logMessage(a,o.LogLevel.Trace,"event added:",r)})}static#m(e,t,a){0!=a.length&&a.forEach(a=>{const r=D.getPopup(t,a.targetId);r?(e.events.remove(a.type,r,()=>{}),o.logMessage(t,o.LogLevel.Trace,"event removed:",a)):o.logMessage(t,o.LogLevel.Error,"EventManager:removePopupEvents - invalid TargetId.",a)})}static#j(e){return b.isFeature(e)}static#R(e){return b.isShape(e)}static#B(e){return b.getFeatureResult(e)}static#F(e){return b.getShapeResult(e)}static#P(e){return b.buildShapeResults(e)}static#T(e){return{layerId:e.layerId,pixel:e.pixel,position:e.position,shapes:this.#P(e.shapes)}}static#A(e){return{interop:e.target.jsInterop}}static#N(e){return{pixel:e.pixel,pixels:e.pixels,position:e.position,positions:e.positions,layerId:e.layerId,shapes:this.#P(e.shapes)}}static#w(e){return{type:e.type}}}!function(e){e.NotifyMapEvent="NotifyMapEvent",e.NotifyMapEventConfig="NotifyMapEventConfig",e.NotifyMapEventData="NotifyMapEventData",e.NotifyMapEventDataSource="NotifyMapEventDataSource",e.NotifyMapEventError="NotifyMapEventError",e.NotifyMapEventHtmlMarker="NotifyMapEventHtmlMarker",e.NotifyMapEventLayer="NotifyMapEventLayer",e.NotifyMapEventMouse="NotifyMapEventMouse",e.NotifyMapEventPopup="NotifyMapEventPopup",e.NotifyMapEventReady="NotifyMapEventReady",e.NotifyMapEventShape="NotifyMapEventShape",e.NotifyMapEventSource="NotifyMapEventSource",e.NotifyMapEventStyle="NotifyMapEventStyle",e.NotifyMapEventTouch="NotifyMapEventTouch",e.NotifyMapEventWheel="NotifyMapEventWheel",e.NotifyMapReady="NotifyMapReady"}(s||(s={})),function(e){e.Error="error",e.Ready="ready"}(n||(n={})),function(e){e.BoxZoomEnd="boxzoomend",e.BoxZoomStart="boxzoomstart",e.Drag="drag",e.DragEnd="dragend",e.DragStart="dragstart",e.Idle="idle",e.Load="load",e.Move="move",e.MoveEnd="moveend",e.MoveStart="movestart",e.Pitch="pitch",e.PitchEnd="pitchend",e.PitchStart="pitchstart",e.Render="render",e.Resize="resize",e.Rotate="rotate",e.RotateEnd="rotateend",e.RotateStart="rotatestart",e.TokenAcquired="tokenacquired",e.Zoom="zoom",e.ZoomEnd="zoomend",e.ZoomStart="zoomstart"}(d||(d={})),function(e){e.MapConfigChanged="mapconfigurationchanged"}(i||(i={})),function(e){e.Data="data",e.SourceData="sourcedata",e.StyleData="styledata"}(l||(l={})),function(e){e.DataSourceUpdated="datasourceupdated",e.DataAdded="dataadded",e.DataRemoved="dataremoved"}(c||(c={})),function(e){e.LayerAdded="layeradded",e.LayerRemoved="layerremoved"}(p||(p={})),function(e){e.Click="click",e.ContextMenu="contextmenu",e.DblClick="dblclick",e.MouseDown="mousedown",e.MouseMove="mousemove",e.MouseOut="mouseout",e.MouseOver="mouseover",e.MouseUp="mouseup"}(u||(u={})),function(e){e.Wheel="wheel"}(v||(v={})),function(e){e.SourceAdded="sourceadded",e.SourceRemoved="sourceremoved"}(g||(g={})),function(e){e.StyleChanged="stylechanged",e.StyleImageMissing="styleimagemissing"}(y||(y={})),function(e){e.TouchCancel="touchcancel",e.TouchEnd="touchend",e.TouchMove="touchmove",e.TouchStart="touchstart"}(M||(M={})),function(e){e.Click="click",e.ContextMenu="contextmenu",e.DblClick="dblclick",e.MouseDown="mousedown",e.MouseEnter="mouseenter",e.MouseLeave="mouseleave",e.MouseMove="mousemove",e.MouseOut="mouseout",e.MouseOver="mouseover",e.MouseUp="mouseup",e.Drag="drag",e.DragEnd="dragend",e.DragStart="dragstart",e.KeyDown="keydown",e.KeyPress="keypress",e.KeyUp="keyup"}(h||(h={})),function(e){e.LayerAdded="layeradded",e.LayerRemoved="layerremoved",e.Click="click",e.ContextMenu="contextmenu",e.DblClick="dblclick",e.MouseDown="mousedown",e.MouseEnter="mouseenter",e.MouseLeave="mouseleave",e.MouseMove="mousemove",e.MouseOut="mouseout",e.MouseOver="mouseover",e.MouseUp="mouseup",e.TouchCancel="touchcancel",e.TouchEnd="touchend",e.TouchMove="touchmove",e.TouchStart="touchstart",e.Wheel="wheel"}(E||(E={})),function(e){e.MouseEnter="mouseenter",e.MouseLeave="mouseleave"}(m||(m={})),function(e){e.Drag="drag",e.DragEnd="dragend",e.DragStart="dragstart",e.Open="open",e.Close="close"}(f||(f={})),function(e){e.ShapeChanged="shapechanged"}(L||(L={})),function(e){e.StyleSelected="styleselected"}(I||(I={}));class O{static getDataSourceShapes(e,t){const a=N.getMap(e);if(!a)return;let o=[];const r=this.getDataSource(a,e,t);return r&&(o=b.buildShapeResults(r.getShapes())),o}static clearDatasource(e,t){const a=N.getMap(e);if(!a)return;const r=this.getDataSource(a,e,t);r&&(r.clear(),o.logMessage(e,o.LogLevel.Debug,`- clearDatasource: datasource with ID '${t}' was cleared.`))}static createDatasource(e,t){const r=N.getMap(e);if(!r)return;if(r.sources.getById(t.id))return void o.logMessage(e,o.LogLevel.Warn,`- createDatasource: datasource with ID '${t.id}' already exists.`);const s=new a.source.DataSource(t.id,t.options);r.sources.add(s),t.url&&s.importDataFromUrl(t.url)}static removeDatasource(e,t){const a=N.getMap(e);if(!a)return;const r=a.sources.getById(t);r&&(a.sources.remove(r),o.logMessage(e,o.LogLevel.Debug,`- removeDatasource: datasource with ID '${t}' was removed.`))}static getDataSource(e,t,r){const s=e.sources.getById(r);if(s instanceof a.source.DataSource)return s;o.logMessage(t,o.LogLevel.Debug,`getDataSource: source with ID '${r}' is not a DataSource.`)}}class T{static addEvents(e,t,a){C.addEvents(e,t,a)}static removeEvents(e,t){C.removeEvents(e,t)}static addControls(e,t){S.addControls(e,t)}static getControls(e){return S.getControls(e)}static removeControls(e,t){S.removeControls(e,t)}static clearDatasource(e,t){O.clearDatasource(e,t)}static createDatasource(e,t){O.createDatasource(e,t)}static getDataSourceShapes(e,t){return O.getDataSourceShapes(e,t)}static removeDatasource(e,t){O.removeDatasource(e,t)}static addMarkers(e,t){k.add(e,t)}static removeMarkers(e,t){k.remove(e,t)}static addPopups(e,t){D.add(e,t)}static removePopups(e,t){D.remove(e,t)}}class N{static#x=new Map;static getAuthTokenCallback;static createMap(e,t,r,s,n){if(o.currentLevel=r.logLevel??o.LogLevel.Information,this.#x.has(t))return void o.logMessage(t,o.LogLevel.Warn,"Map already exists.");r.inDevelopment&&o.logMessage(t,o.LogLevel.Trace,"Settings-MapOptions:",r.options);const d=this.#V(r.authOptions,r.options),i=new a.Map(t,d);this.#x.set(t,i),o.logMessage(t,o.LogLevel.Debug,"was created."),n&&T.addControls(t,n),this.#W(e,t,s)}static getMap(e){const t=this.#x.get(e);return t||o.logMessage(e,o.LogLevel.Debug,"was not found."),t}static removeMap(e){this.#x.delete(e)&&o.logMessage(e,o.LogLevel.Debug,"was removed")}static#V(e,t){let a={};return t&&(t.camera?a={...a,...t.camera}:t.cameraBounds&&(a={...a,...t.cameraBounds}),t.service&&(a={...a,...t.service}),t.style&&(a={...a,...t.style}),t.userInteraction&&(a={...a,...t.userInteraction})),a.authOptions=e,a.authOptions.getToken=this.getAuthTokenCallback,a}static#W(e,t,a){const r=this.getMap(t);r?(a??=[],r.events.addOnce(n.Ready,d=>{r.events.add(n.Error,a=>{const r={mapId:t,type:n.Ready,payload:{message:a.error.message,name:a.error.name,stack:a.error.stack,cause:a.error.cause}};o.logMessage(t,o.LogLevel.Error,"Map error",r),e.invokeMethodAsync(s.NotifyMapEventError,r)}),T.addEvents(e,t,a);const i={mapId:t,type:n.Ready};e.invokeMethodAsync(s.NotifyMapEventReady,i),e.invokeMethodAsync(s.NotifyMapReady,i)})):o.logMessage(t,o.LogLevel.Error,"Cannot build events. Map not found.")}}class w{static getCamera(e){const t=N.getMap(e);if(t)return t.getCamera()}static setCamera(e,t){const a=N.getMap(e);if(!a)return;let o=this.#U(t);a.setCamera(o)}static getMapOptions(e){const t=N.getMap(e);if(t)return{mapCamera:t.getCamera(),service:t.getServiceOptions(),style:t.getStyle(),userInteraction:t.getUserInteraction()}}static setMapOptions(e,t){const a=N.getMap(e);if(!a)return;console.debug("Setting map options - before:",t);let o=this.#U(t.camera);console.debug("Setting map options - after:",o),a.setCamera(o),t.service&&a.setServiceOptions(t.service),t.style&&a.setStyle(t.style),t.userInteraction&&a.setUserInteraction(t.userInteraction)}static getServiceOptions(e){const t=N.getMap(e);if(t)return t.getServiceOptions()}static setServiceOptions(e,t){const a=N.getMap(e);a&&a.setServiceOptions(t)}static getStyle(e){const t=N.getMap(e);if(t)return t.getStyle()}static setStyle(e,t){const a=N.getMap(e);a&&a.setStyle(t)}static getUserInteraction(e){const t=N.getMap(e);if(t)return t.getUserInteraction()}static setUserInteraction(e,t){const a=N.getMap(e);a&&a.setUserInteraction(t)}static#U(e){let t={};return e.camera?t={...e.camera,...e.animation}:e.cameraBounds&&(t={...e.cameraBounds,...e.animation}),t}}class P{static addFeature(e,t,a,o){const r=N.getMap(e);if(!r)return;const s=O.getDataSource(r,e,a);s&&this.#$(r,e,t,s,o)}static addFeatures(e,t,a,o){const r=N.getMap(e);if(!r)return;const s=O.getDataSource(r,e,a);s&&t.forEach(t=>{this.#$(r,e,t,s,o)})}static#$(e,t,s,n,d){if(d&&s.id){const e=n.getShapeById(s.id);e&&n.remove(e)}let i;switch(s.geometry.type.toLowerCase()){case r.Point:i=new a.data.Point(s.geometry.coordinates);break;case r.MultiPoint:i=new a.data.MultiPoint(s.geometry.coordinates,s.bbox);break;case r.LineString:i=new a.data.LineString(s.geometry.coordinates,s.bbox);break;case r.Polygon:i=new a.data.Polygon(s.geometry.coordinates,s.bbox)}if(!i)return void o.logMessage(t,o.LogLevel.Error,`- adding feature error: geometry type '${s.geometry.type}' not supported`);const l={...s.properties,interopId:s.interopId};let c=new a.data.Feature(i,l,s.id);if(s.asShape){let e=new a.Shape(c);n.add(e)}else n.add(c)}static updateFeature(e,t,a){const o=N.getMap(e);if(!o)return;const r=O.getDataSource(o,e,a);if(!r)return;const s=r.getShapeById(t.id);s&&s.setCoordinates(t.geometry.coordinates)}static updateFeatures(e,t,a){const o=N.getMap(e);if(!o)return;const r=O.getDataSource(o,e,a);r&&t.forEach(e=>{const t=r.getShapeById(e.id);t&&t.setCoordinates(e.geometry.coordinates)})}}class A{static createLayer(e,t,r){const s=N.getMap(e);if(!s)return;if(b.isEmptyOrNull(t.type))return void o.logMessage(e,o.LogLevel.Error,"- CreateLayer: layer type is missing");const n=t.id;if(b.isNotEmptyOrNull(n)&&s.layers.getLayerById(n))return void o.logMessage(e,o.LogLevel.Error,`- CreateLayer: layer already exists where ID=${n}`);let d;if(r){if(d=new a.source.DataSource(r.id,r.options),!d)return void o.logMessage(e,o.LogLevel.Error,"- CreateLayer: Unable to create datasource.",r);s.sources.add(d),b.isNotEmptyOrNull(r.url)&&d.importDataFromUrl(r.url)}else if(d=s.sources.getById(t.sourceId),!d)return void o.logMessage(e,o.LogLevel.Error,`- CreateLayer: Unable to find datasource where ID=${t.sourceId}.`);const i=t.options||{};switch(i.jsInterop={layerid:n},t.type){case"Bubble":s.layers.add(new a.layer.BubbleLayer(d,n,i),t.before);break;case"HeatMap":s.layers.add(new a.layer.HeatMapLayer(d,n,i),t.before);break;case"Image":s.layers.add(new a.layer.ImageLayer(i,n),t.before);break;case"Line":s.layers.add(new a.layer.LineLayer(d,n,i),t.before);break;case"Polygon":s.layers.add(new a.layer.PolygonLayer(d,n,i),t.before);break;case"PolygonExtrusion":s.layers.add(new a.layer.PolygonExtrusionLayer(d,n,i),t.before);break;case"Symbol":s.layers.add(new a.layer.SymbolLayer(d,n,i),t.before);break;case"Tile":s.layers.add(new a.layer.TileLayer(i,n),t.before);break;default:o.logMessage(e,o.LogLevel.Warn,`- CreateLayer: layer type '${t.type}' is not supported.`)}}static removeLayer(e,t){const a=N.getMap(e);if(!a)return;const r=a.layers.getLayerById(t);r&&(a.layers.remove(r),o.logMessage(e,o.LogLevel.Debug,`- CreateLayer:- layer with id '${t}' was removed.`))}static removeLayerAndDataSource(e,t,a){this.removeLayer(e,t.id),T.removeDatasource(e,a.id)}static addMapFeature(e,t,a,o){P.addFeature(e,t,a,o)}static addMapFeatures(e,t,a,o){P.addFeatures(e,t,a,o)}static updateMapFeature(e,t,a){P.updateFeature(e,t,a)}static updateMapFeatures(e,t,a){P.updateFeatures(e,t,a)}}marqdoujAzureMaps=t})();